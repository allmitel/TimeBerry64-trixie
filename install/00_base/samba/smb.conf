#
# Samba Configuration Renaud
#

#======================= Global Settings =======================

[global]
   workgroup = WORKGROUP
   mdns name = mdns
;   interfaces = 127.0.0.0/8 eth0
;   bind interfaces only = yes
## Logging
   log file = /var/log/samba/log.%m
   log level = 2
   max log size = 1000
   logging = file
   panic action = /usr/share/samba/panic-action %d

## Authentication
   server role = standalone server
   security = user
   obey pam restrictions = yes
   unix password sync = yes
   passwd program = /usr/bin/passwd %u
   passwd chat = *Enter\snew\s*\spassword:* %n\n *Retype\snew\s*\spassword:* %n\n *password\supdated\ssuccessfully* .
   pam password change = yes
   map to guest = Bad User

## Apple&TimeMachine
   min protocol = SMB2
   ea support = yes
   vfs objects = acl_xattr catia fruit streams_xattr
   fruit:aapl = yes
   fruit:metadata = stream
   fruit:model = TimeCapsule
   fruit:posix_rename = yes
   fruit:veto_appledouble = no
   fruit:wipe_intentionally_left_blank_rfork = yes
   fruit:delete_empty_adfiles = yes
   
## Speedup
   use sendfile = yes

#======================= Share Definitions =====================

#[homes]
#   comment = Home Directories
#   browseable = no
#   read only = yes
#   create mask = 0700
#   directory mask = 0700
#   valid users = %S

[TimeMachine]
   vfs objects = acl_xattr catia fruit streams_xattr
   fruit:time machine = yes
   fruit:nfs_aces = no
   inherit permissions = yes
   path = /media/TimeCapsule
   browseable = no
   writeable = yes
   read only = no
   valid users = timemachine

#[TimeMachine-BigSur]
#   vfs objects = catia fruit streams_xattr
#   fruit:time machine = yes
#   path = /media/TimeCapsule/TimeCapsule-BigSur
#   browseable = no
#   writeable = yes
#   read only = no
#   valid users = timemachine

[TimeBerry64]
   path = /media/WD
   browseable = yes
   writeable = yes
   read only = no
   create mask = 0777
   directory mask = 0777
   valid users = pi, renaud

[Musique]
   path = /media/WD/altraâ€¢Docs/Music
   browseable = no
   writeable = no
   read only = yes
   valid users = pi
